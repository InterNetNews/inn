.\" Automatically generated by Pod::Man v1.34, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "ARCHIVE 8"
.TH ARCHIVE 8 "2004-05-26" "INN 2.5.0" "InterNetNews Documentation"
.SH "NAME"
archive \- Usenet article archiver
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBarchive\fR [\fB\-cfr\fR] [\fB\-a\fR \fIarchive\fR] [\fB\-i\fR \fIindex\fR] [\fB\-p\fR \fIpattern\fR]
[\fIinput\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBarchive\fR makes copies of files specified on its standard input.  It is
normally run either as a channel feed under \fBinnd\fR or or by a script
before \fBnews.daily\fR is run.
.PP
\&\fBarchive\fR reads the named \fIinput\fR file, or standard input if no file is
given.  The input is taken as a sequence of lines; blank lines and lines
starting with a number sign (\f(CW\*(C`#\*(C'\fR) are ignored.  All other lines should
specify the token of an article to archive.  Every article is retrieved
from a token, and the Xref: header is used to determine the target file in
the archive directory.  You can limit the targets taken from the Xref:
header with the \fB\-p\fR option.
.PP
Files are copied to a directory within the archive directory,
\&\fIpatharchive\fR in \fIinn.conf\fR (or some other directory given with \fB\-a\fR).
The default is to create a hierarchy that mimics a traditional news spool
storage of the given articles; intermediate directories will be created as
needed.  For example, if the input token represents article 2211 in the
newsgroup comp.sources.unix, \fBarchive\fR will by default store the article
as:
.PP
.Vb 1
\&    comp/sources/unix/2211
.Ve
.PP
in the archive area.  This can be modified with the \fB\-c\fR and \fB\-f\fR
options.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-a\fR \fIarchive\fR" 4
.IX Item "-a archive"
If the \fB\-a\fR flag is given, its argument specifies the root of the archive
area, instead of \fIpatharchive\fR in \fIinn.conf\fR.
.IP "\fB\-c\fR" 4
.IX Item "-c"
If the \fB\-c\fR flag is given, directory names will be flattened as described
under the \fB\-f\fR option.  Then, additionally, all posts will be
concatenated into a single file, appending to that file if it already
exists.  The file name will be \s-1YYYYMM\s0, formed from the current time when
\&\fBarchive\fR is run.  In other words, if given an article in
comp.sources.unix on December 14, 1998, the article would be appended to
the file:
.Sp
.Vb 1
\&    comp.sources.unix/199812
.Ve
.Sp
in the archive area.
.Sp
Articles will be separated by a line containing only \f(CW\*(C`\-\-\-\-\-\-\-\-\-\-\-\*(C'\fR.
.IP "\fB\-f\fR" 4
.IX Item "-f"
If the \fB\-f\fR flag is used, directory names will be flattened, replacing
the slashes with the periods.  In other words, article 2211 in
comp.sources.unix will be written to:
.Sp
.Vb 1
\&    comp.sources.unix/2211
.Ve
.Sp
in the archive area.
.IP "\fB\-i\fR \fIindex\fR" 4
.IX Item "-i index"
If the \fB\-i\fR flag is used, \fBarchive\fR will append one line to the file
\&\fIindex\fR for each article that it archives.  This line will contain the
destination file name, the message \s-1ID\s0 header, and the Subject header of
the message, separated by spaces.  If either header is missing (normally
not possible if the article was accepted by \fBinnd\fR), it will be replaced
by \f(CW\*(C`<none>\*(C'\fR.  The headers will be transformed using the same rules as
are used to generate overview data (unfolded and then with tabs, \s-1CR\s0, and
\&\s-1LF\s0 replaced by spaces).
.IP "\fB\-p\fR \fIpattern\fR" 4
.IX Item "-p pattern"
Limits the targets taken from the Xref: header to the groups specified in
\&\fIpattern\fR.  \fIpattern\fR is a \fIuwildmat\fR\|(3) pattern matching newsgroups that
you wish to have \fBarchive\fR handle.
.IP "\fB\-r\fR" 4
.IX Item "-r"
By default, \fBarchive\fR sets its standard error to \fIpathlog\fR/errlog.  To
suppress this redirection, use the \fB\-r\fR flag.
.SH "RETURN VALUE"
.IX Header "RETURN VALUE"
If the input is exhausted, \fBarchive\fR will exit with a zero status.  If an
I/O error occures, it will try to spool its input, copying it to a file.
If there was no input filename, the standard input will be copied to
\&\fIpathoutgoing\fR/archive and the program will exit.  If an input filename
was given, a temporary file named \fIinput\fR.bch (if \fIinput\fR is an absolute
pathname) or \fIpathoutgoing\fR/\fIinput\fR.bch (if the filename does not begin
with a slash) is created.  Once the input is copied, \fBarchive\fR will try
to rename this temporary file to be the name of the input file, and then
exit.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
A typical \fInewsfeeds\fR\|(5) entry to archive most source newsgroups is as
follows:
.PP
.Vb 4
\&    source-archive\e
\&        :!*,*sources*,!*wanted*,!*.d\e
\&        :Tc,Wn\e
\&        :<pathbin>/archive -f -i <patharchive>/INDEX
.Ve
.PP
Replace <pathbin> and <patharchive> with the appropriate paths.
.SH "HISTORY"
.IX Header "HISTORY"
Written by Rich \f(CW$alz\fR <rsalz@uunet.uu.net> for InterNetNews.  Converted to
\&\s-1POD\s0 by Russ Allbery <rra@stanford.edu>.
.PP
$Id$
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIinn.conf\fR\|(5),
\&\fInewsfeeds\fR\|(5).
