.\" $Revision$
.TH RNEWS 1
.SH NAME
rnews \- receive news from a UUCP connection
.SH SYNOPSIS
.B rnews
[
.BI \-h " host"
]
[
.B \-N
]
[
.BI \-P " port"
]
[
.BI \-r " remote"
]
[
.BI \-S " remote"
]
[
.B \-U
]
[
.B \-v
]
[
.I input
]
.SH DESCRIPTION
.I Rnews
reads messages typically queued by a UUCP newsfeed and
sends them to the InterNetNews server (either ``localhost'', or the
value defined by the variable 
.IR <nnrpdposthost\ in\ inn.conf> .
.PP
The message is read from the specified input file, or standard input
if no input is named.
.PP
When sent over UUCP, Usenet articles are typically joined in a single
batch to reduce the UUCP overhead.
Batches can also be compressed, to reduce the communication time.
If a message does not start with a number sign (``#'') and an exclamation
point, then the entire input is taken as a single news article.
If it does start with with those two characters, then the first line is
read and interpreted as a batch command.
.PP
If the command is ``#! rnews nnn'' where
.I nnn
is a number, then the next
.I nnn
bytes (starting with the next line) are read as a news article.
.PP
If the command is ``#! cunbatch'' then the rest of input is fed to the
.IR compress (1)
program with the ``\-d'' flag to uncompress it, and
the output of this pipe is read as
.IR rnews 's
input.
This is for historical compatibility \(em there is no program named
.IR cunbatch .
A compressed batch will start with a ``#! cunbatch'' line, then contain a
series of articles separated by ``#! rnews nnn'' lines.
If 
.I <DO_RNEWSPROGS in include/config.h>
is defined and the command is any other word, then
.I rnews
will try to execute a program with that name in the directory
.IR <pathbin\ in\ inn.conf>/bin/rnews.libexec .

The batch will be fed into the program's standard input, and the
standard output will be read back as input into
.IR rnews .
If 
.I <DO_RNEWS_SAVE_BAD in include/config.h> 
is defined and
.I rnews
detects any problems with an article such as a missing header, or
an unintelligible reply from the server, it will save a copy of the article
in the
.I <pathincoming in inn.conf>/bad
directory.
.SH OPTIONS
.TP
.B \-h
If the ``\fB\-h\fP'' flag is given, then
.I rnews
will log the Message-ID and host via
.IR syslog (3)
for each article offered to the server.
Logging will only be done if the value is not an empty string.
If ``\fB\-h\fP'' is not set, the environment variable
.I <_ENV_UUCPHOST in include/paths.h>
(typically
.IR $UU_MACHINE )
will be examined for a similar string.
.TP
.B \-N
Normally, if unpacking the input fails it is re-spooled to
.I <pathincoming in inn.conf>
for another attempt later.  If the ``\fB\-N\fP'' flag is used then no such
re-spooling is done and rnews exits with status value ``9'' to indicate
this.
.TP
.B \-P
If the ``\fB\-P\fP'' flag is used, then the articles will be sent to the
specified port on the remote host.
.TP
.B \-r
If the ``\fB\-r\fP'' flag is used, then the articles will be sent to the
named remote host instead of the default host.
.TP
.B \-S
\&``\fB\-S\fP'' flag is equivalent to ``\fB\-r\fP'' flag.
.TP
.B \-U
If the server is not available, the message is spooled into a new file
created in the
.I <pathincoming in inn.conf>
directory.
The ``\fB\-U\fP'' flag may be used to send all spooled messages to the
server once it becomes available again, and can be invoked regularly
by
.IR cron (8).
.TP
.B \-v
If the ``\fB\-v\fP'' flag is used, it will print a notice of all errors on the
standard error, naming the input file (if known) and printing the first
few characters of the input.
Errors are always logged through
.IR syslog (3).
.SH BUGS
.I Rnews
cannot process articles that have embedded ``\e0'' characters in them.
.SH HISTORY
Written by Rich $alz <rsalz@uunet.uu.net> for InterNetNews.
.de R$
This is revision \\$3, dated \\$4.
..
.R$ $Id$
.SH "SEE ALSO"
inn.conf(5),
innd(8).
